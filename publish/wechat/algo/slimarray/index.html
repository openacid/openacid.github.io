<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.20.2 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="zh" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>slimarray: gzipçš„å‹ç¼©ç‡, å³æ—¶è®¿é—® - OpenACID Blog</title>
<meta name="description" content="slimarray æ˜¯ä¸€ä¸ªé™æ€æ•´æ•°å‹ç¼©æ•°ç»„, ç°å®æ•°æ®è¾¾åˆ°å’Œgzipç›¸å½“çš„å‹ç¼©ç‡, æ— éœ€è§£å‹å°±å¯ä»¥ç›´æ¥ä½¿ç”¨">


  <meta name="author" content="å¼ ç‚æ³¼(xp)">
  
  <meta property="article:author" content="å¼ ç‚æ³¼(xp)">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="zh_CN">
<meta property="og:site_name" content="OpenACID Blog">
<meta property="og:title" content="slimarray: gzipçš„å‹ç¼©ç‡, å³æ—¶è®¿é—®">
<meta property="og:url" content="https://blog.openacid.com/algo/slimarray/">


  <meta property="og:description" content="slimarray æ˜¯ä¸€ä¸ªé™æ€æ•´æ•°å‹ç¼©æ•°ç»„, ç°å®æ•°æ®è¾¾åˆ°å’Œgzipç›¸å½“çš„å‹ç¼©ç‡, æ— éœ€è§£å‹å°±å¯ä»¥ç›´æ¥ä½¿ç”¨">







  <meta property="article:published_time" content="2020-11-15T00:00:00+08:00">





  

  


<link rel="canonical" href="https://blog.openacid.com/algo/slimarray/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "OpenACID-åˆ†å¸ƒå¼ç ”ç©¶å°é™¢",
      "url": "https://blog.openacid.com/"
    
  }
</script>






<!-- end _includes/seo.html -->


<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="OpenACID Blog Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css">

<!--[if IE]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<link rel="apple-touch-icon" sizes="180x180"    href="/assets/images/favicon/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/images/favicon/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/images/favicon/favicon-16x16.png">
<link rel="manifest"                            href="/assets/images/favicon/site.webmanifest">

<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">

<!-- end custom head snippets -->

  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <h2 class="screen-reader-text">è·³è½¬é“¾æ¥</h2>
  <ul>
    <li>[è½¬åˆ°ä¸»å¯¼èˆªæ ]</li>
    <li>[è½¬åˆ°å†…å®¹]</li>
    <li>[è½¬åˆ°åº•éƒ¨]</li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please [upgrade your browser] to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/"><img src="/assets/images/logo/icon-lemon-margin.png" alt=""></a>
        
        <a class="site-title" href="/">
          OpenACID Blog
          
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              [About Us]
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">åˆ‡æ¢æœç´¢</span>
          <svg class="icon" width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.99 16">
            <path d="M15.5,13.12L13.19,10.8a1.69,1.69,0,0,0-1.28-.55l-0.06-.06A6.5,6.5,0,0,0,5.77,0,6.5,6.5,0,0,0,2.46,11.59a6.47,6.47,0,0,0,7.74.26l0.05,0.05a1.65,1.65,0,0,0,.5,1.24l2.38,2.38A1.68,1.68,0,0,0,15.5,13.12ZM6.4,2A4.41,4.41,0,1,1,2,6.4,4.43,4.43,0,0,1,6.4,2Z" transform="translate(-.01)"></path>
          </svg>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">åˆ‡æ¢èœå•</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="http://schema.org/Person">
  
  
  <p>

  
    <div class="author__avatar">
      
        <img src="/assets/images/author/xp.jpg" alt="å¼ ç‚æ³¼(xp)" itemprop="image">
      
    </div>
  

  <div class="author__content">
    
      <h3 class="author__name" itemprop="name">å¼ ç‚æ³¼(xp)</h3>
    
    
      <div class="author__bio" itemprop="description">
        <p>æ­£åœ¨å­¦ç”»ç”», ä¸»ä¸šæ˜¯ç å†œ</p>

      </div>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">å…³æ³¨</button>
    <ul class="author__urls social-icons">
      

      
        
          
            <li>[<i class="fas fa-fw fa-link" aria-hidden="true"></i><span class="label">ä¸ªäººåšå®¢</span>]</li>
          
        
      

      

      

      

      

      

      

      

      

      

      

      
        <li>
          [
            <i class="fab fa-fw fa-github" aria-hidden="true"></i><span class="label">GitHub</span>
          ]
        </li>
      

      

      

      

      

      

      

      

      

      

      
        <li>
          [
            <i class="fab fa-fw fa-weibo" aria-hidden="true"></i><span class="label">Weibo</span>
          ]
        </li>
      

      

      

      

      <!--
  <li>
    [
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    ]
  </li>
-->
    </ul>
  </div>

  </p>
  
</div>

  
  </div>



  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="slimarray: gzipçš„å‹ç¼©ç‡, å³æ—¶è®¿é—®">
    <meta itemprop="description" content="slimarray æ˜¯ä¸€ä¸ªé™æ€æ•´æ•°å‹ç¼©æ•°ç»„, ç°å®æ•°æ®è¾¾åˆ°å’Œgzipç›¸å½“çš„å‹ç¼©ç‡, æ— éœ€è§£å‹å°±å¯ä»¥ç›´æ¥ä½¿ç”¨">
    <meta itemprop="datePublished" content="2020-11-15T00:00:00+08:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">slimarray: gzipçš„å‹ç¼©ç‡, å³æ—¶è®¿é—®
</h1>
          

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          12 åˆ†é’Ÿé˜…è¯»
        
      </span>
    
  </p>


        </header>
      

      <section class="page__content" itemprop="text">
        
          <aside class="sidebar__right sticky">
            <nav class="toc">
              <header><h4 class="nav__title"><i class="fas fa-file-alt"></i> æœ¬æ–‡ç›®å½•</h4></header>
              <ul class="toc__menu">
  <li>[åœºæ™¯å’Œé—®é¢˜]</li>
  <li>[åˆæ­¥æƒ³æ³•: å‰ç¼€å‹ç¼©]</li>
  <li>[æ‰¾åˆ°è¶‹åŠ¿å‡½æ•°]</li>
  <li>[å¯»æ‰¾æœ€ä½³åˆ†æ®µæ‹Ÿåˆç­–ç•¥]</li>
  <li>[å®ç°]
    <ul>
      <li>[æè¿°åˆ†åŒºçš„æ•°æ®ç»“æ„: span]</li>
      <li>[è¯»å–è¿‡ç¨‹]</li>
      <li>[æ±‚å’Œçš„ä¼˜åŒ–è®¾è®¡]</li>
    </ul>
  </li>
</ul>

            </nav>
          </aside>
        
        <p style="font-size: 0.7rem; font-weight: bolder;">
æœ¬æ–‡é“¾æ¥: [https://blog.openacid.com/algo/slimarray/]


</p>


        
          



<img src="/post-res/slimarray/slimarray-banner-small.jpg" alt="slimarray: gzipçš„å‹ç¼©ç‡, å³æ—¶è®¿é—®" class="page__hero-image">

        

        <p><br /></p>

<p>[<svg height="24" class="octicon octicon-mark-github" viewBox="0 0 16 16" version="1.1" width="24" aria-hidden="true"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path></svg> slimarray]</p>

<h1 id="åœºæ™¯å’Œé—®é¢˜">åœºæ™¯å’Œé—®é¢˜</h1>

<p>åœ¨æ—¶åºæ•°æ®åº“, æˆ–åˆ—å­˜å‚¨ä¸ºåŸºç¡€çš„ç³»ç»Ÿä¸­, å¾ˆå¸¸è§çš„å½¢å¼å°±æ˜¯å­˜å‚¨ä¸€ä¸ªæ•´æ•°æ•°ç»„,
ä¾‹å¦‚ [slim] è¿™ä¸ªé¡¹ç›®æŒ‰å¤©ç»Ÿè®¡çš„ star æ•°:</p>

<p>[<img src="https://starchart.cc/openacid/slim.svg" alt="Stargazers over time" />]</p>

<p>è¿™ç±»æ•°æ®æœ‰æœ‰å¾ˆæ˜æ˜¾çš„ç»Ÿä¸€çš„å˜åŒ–è¶‹åŠ¿, å¯¹è¿™ç±»æ•°æ®çš„å­˜å‚¨,
æˆ‘ä»¬å¯ä»¥åˆ©ç”¨æ•°æ®åˆ†å¸ƒçš„ç‰¹ç‚¹, å°†æ•´ä½“æ•°æ®çš„å¤§å°å‹ç¼©åˆ°<strong>å‡ åˆ†ä¹‹ä¸€</strong>.
è¿™å°±æ˜¯ [slimarray] è¦åšçš„äº‹æƒ….</p>

<p>ä½¿ç”¨ [slimarray], å¯ä»¥å°†æ•°æ®å®¹é‡å‡å°åˆ°gzipå·®ä¸å¤šçš„å¤§å°,
åŒæ—¶è¿˜èƒ½å…è®¸ç›´æ¥è®¿é—®è¿™äº›æ•°æ®!
æµ‹è¯•ä¸­æˆ‘ä»¬é€‰æ‹©äº†2ç»„éšæœºæ•°, ä»¥åŠç°å®ä¸­çš„2ä»½æ•°æ®, ä¸€ä¸ªipv4çš„æ•°æ®åº“, ä¸€ä¸ª [slim] çš„starå˜åŒ–æ•°æ®, æœç”¨ [slimarray] åæ•ˆæœå¦‚ä¸‹:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Data size</th>
      <th style="text-align: left">Data Set</th>
      <th style="text-align: right">gzip size</th>
      <th style="text-align: left">slimarry size</th>
      <th style="text-align: right">avg size</th>
      <th style="text-align: right">ratio</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right">1,000</td>
      <td style="text-align: left">rand u32: [0, 1000]</td>
      <td style="text-align: right">x</td>
      <td style="text-align: left">824 byte</td>
      <td style="text-align: right">6 bit/elt</td>
      <td style="text-align: right">18%</td>
    </tr>
    <tr>
      <td style="text-align: right">1,000,000</td>
      <td style="text-align: left">rand u32: [0, 1000,000]</td>
      <td style="text-align: right">x</td>
      <td style="text-align: left">702 KB</td>
      <td style="text-align: right">5 bit/elt</td>
      <td style="text-align: right">15%</td>
    </tr>
    <tr>
      <td style="text-align: right">1,000,000</td>
      <td style="text-align: left">IPv4 DB</td>
      <td style="text-align: right">2 MB</td>
      <td style="text-align: left">2 MB</td>
      <td style="text-align: right">16 bit/elt</td>
      <td style="text-align: right">50%</td>
    </tr>
    <tr>
      <td style="text-align: right">600</td>
      <td style="text-align: left">[slim] star count</td>
      <td style="text-align: right">602 byte</td>
      <td style="text-align: left">832 byte</td>
      <td style="text-align: right">10 bit/elt</td>
      <td style="text-align: right">26%</td>
    </tr>
  </tbody>
</table>

<p>åœ¨è¾¾åˆ°gzipåŒç­‰å‹ç¼©ç‡çš„å‰æä¸‹, æ„å»º slimarray å’Œ è®¿é—®çš„æ€§èƒ½ä¹Ÿéå¸¸é«˜:</p>
<ul>
  <li>æ„å»º slimarray æ—¶, å¹³å‡æ¯ç§’å¯å‹ç¼© 6ç™¾ä¸‡ ä¸ªæ•°ç»„å…ƒç´ ;</li>
  <li>è¯»å–ä¸€ä¸ªæ•°ç»„å…ƒç´ å¹³å‡èŠ±è´¹ 7 ns/op.</li>
</ul>

<p>æœ¬æ–‡æ‰‹æŠŠæ‰‹çš„ä»‹ç» [slimarray] çš„åŸç†, å®ç°:</p>

<h1 id="åˆæ­¥æƒ³æ³•-å‰ç¼€å‹ç¼©">åˆæ­¥æƒ³æ³•: å‰ç¼€å‹ç¼©</h1>

<p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªåŒ…å«4ä¸ªå…ƒç´ çš„uint32çš„æ•´æ•°æ•°ç»„:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nums = [1006, 1005, 1007, 1010]
</code></pre></div></div>

<p>å‰ç¼€å‹ç¼©çš„æ€è·¯å°±æ˜¯æŠŠæ¯ä¸ªå…ƒç´ çš„å…¬å…±éƒ¨åˆ†æå–å‡ºæ¥å•ç‹¬å­˜å‚¨, è¿™æ ·æ¯ä¸ªå•ç‹¬å…ƒç´ å°±åªéœ€è¦å­˜å‚¨å®ƒè·Ÿå…¬å…±éƒ¨åˆ†å·®å¼‚çš„éƒ¨åˆ†, ä»è€Œå¤§å¤§é™ä½å­˜å‚¨ç©ºé—´. (å› ä¸ºå…¬å…±éƒ¨åˆ†åœ¨å¤§å¤šæ•°æƒ…å†µä¸­éƒ½åœ¨å‰é¢(ä¾‹å¦‚ç°å®ä¸­å¤§éƒ¨åˆ†è¢«å­˜å‚¨çš„æ•°æ®éƒ½æ˜¯æ’åºçš„, æˆ–è¿‘ä¼¼äºæ’åºçš„), æ‰€ä»¥ä¸€èˆ¬æå–å…¬å…±éƒ¨åˆ†çš„å‹ç¼©éƒ½æ˜¯å‰ç¼€å‹ç¼©)</p>

<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­, æˆ‘ä»¬çœ‹åˆ°æœ€å°çš„æ•°æ˜¯1005, é‚£ä¹ˆå°±æŠŠå®ƒä½œä¸ºå…¬å…±éƒ¨åˆ†æå–å‡ºæ¥, å†å•ç‹¬å­˜å‚¨æ¯ä¸ªæ•°å­—å‰©ä½™çš„éƒ¨åˆ†(å’Œprefixçš„å·®å¼‚), æœ€åå­˜å‚¨çš„å†…å®¹å¦‚ä¸‹:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
  Prefix: 1005
  deltas: [
    1,
    0,
    2,
    5
  ]
}
</code></pre></div></div>

<p>å¯ä»¥çœ‹åˆ°è¿™ç§è¡¨ç¤ºæ–¹æ³•ä¸­, å›ºå®šçš„éƒ¨åˆ†Prefixå¤§å°ä¸å˜, å½±å“æ•´ä¸ªå­˜å‚¨æ•ˆç‡çš„æ˜¯deltas, è€Œå®ƒåªéœ€è¦è®°å½•æ¯ä¸ªåŸå§‹å€¼è·Ÿå‰ç¼€ä¹‹é—´çš„å·®, æœ€å¤§æ˜¯5, ä¹Ÿå°±æ˜¯è¯´æ¯ä¸ªdelta åªéœ€è¦<strong>3 bit</strong>å°±å¤Ÿäº†.</p>

<p>å½“æ•°æ®è¾ƒå¤šæ—¶, å‡æ‘Šç©ºé—´å¼€é”€å°†è¿‘ä¼¼äº3 bit/elt.</p>

<p>ç°åœ¨æˆ‘ä»¬æ¢ä¸€ä¸ªè§†è§’, æˆ‘ä»¬å¯ä»¥æŠŠè¦å­˜å‚¨çš„æ•°å€¼çœ‹åšæ˜¯ä¸€ä¸ªåæ ‡ç³»ä¸­çš„4ä¸ªç‚¹:
æ¨ªè½´è¡¨ç¤ºæ•°ç»„ä¸‹æ ‡, çºµè½´è¡¨ç¤ºæ•°å­—çš„å€¼.</p>

<p>äºæ˜¯å‰ç¼€å‹ç¼©å°±å¯ä»¥çœ‹æˆæ˜¯: è®°å½•ä¸€æ¡æ°´å¹³ç›´çº¿(<code class="highlighter-rouge">y = 1005</code>), å†è®°å½•æ•°ç»„ä¸­å®é™…æ•°å€¼è·Ÿè¿™æ¡ç›´çº¿ä¹‹é—´çš„yè½´æ–¹å‘è·ç¦»:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>y = 1005
num[0] = y(0) + 1 = 1006
num[1] = y(1) + 0 = 1005
num[2] = y(2) + 2 = 1007
num[3] = y(3) + 5 = 1010
                                                (3, 1010)







                                    (2, 1007)

            (0, 1006)

........................(1, 1005)...........................
</code></pre></div></div>

<p>ğŸ¤”!!!</p>

<p>ä»åæ ‡ç³»è¿™ç§è§†è§’, ä¼¼ä¹è¿˜å¯ä»¥è¿›ä¸€æ­¥å‡å°å­˜å‚¨ç©ºé—´,
è€ƒè™‘åˆ°ç°å®ä¸­, ä¸€ä¸ªæ•°ç»„ä¸­çš„æ•°å€¼, å¯èƒ½æ˜¯è¶‹å‘äºä¸€ä¸ªæŒç»­çš„å˜åŒ–(å¦‚é€’å¢çš„), è€Œä¸æ˜¯å›´ç»•æŸä¸ªç‰¹å®šå€¼çš„(å¦‚1005).</p>

<p>ä¾‹å¦‚å¤§å®¶çš„è´¦ä¸Šä½™é¢, åº”è¯¥æ˜¯é€æœˆé€’å¢çš„ğŸ¤”.</p>

<p>æ‰€ä»¥, å…ˆæè¿°è¿™ä¸ªè¶‹åŠ¿, å†ç”¨deltaæ•°ç»„å»ä¿®æ­£åˆ°æ­£ç¡®å€¼, åº”è¯¥å¯ä»¥æ›´å¤§ç¨‹åº¦çš„é™ä½deltaçš„å–å€¼èŒƒå›´. ä½œè€…ç»è¿‡ä»”ç»†è®¤çœŸçš„è§‚å¯Ÿå’Œç ”ç©¶, çªç„¶é—´å‘ç°å¯ä»¥å®šä¹‰ä¸€æ¡ç›´çº¿æ–¹ç¨‹, å†é€šè¿‡deltaæ•°ç»„å»ä¿®æ­£, å°±æ˜¯è¿™ä¸ªæ ·å­:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>y = 1003.6 + 1.4x
num[0] = y(0) + 3 = 1006
num[1] = y(1) + 0 = 1005
num[2] = y(2) + 1 = 1007
num[3] = y(3) + 3 = 1010
                                                (3, 1010)

                                                        ....
                                                   .....
                                             ......
                                    (2, 1007)
                                  ......
            (0, 1006)       ......
                       .(1, 1005)
                 ......
            .....
      ......
......
</code></pre></div></div>

<p>è¿™æ ·æè¿°æ•°å€¼è¶‹åŠ¿, deltaçš„æœ€å¤§å€¼åªæœ‰3, åªéœ€è¦2ä¸ªbitå°±å¯ä»¥äº†.
äºæ˜¯å½“æ•°æ®é‡å¢å¤§æ—¶, å‡æ‘Šç©ºé—´æ•ˆç‡å°±æ˜¯ 2 bit/elt.</p>

<p>æ˜¾ç„¶,  ç”¨æ›´é«˜æ¬¡çš„æ›²çº¿å»æ‹Ÿåˆ, å¯ä»¥æ›´è´´åˆåŸå§‹ç‚¹, å¾—åˆ°æ›´é«˜çš„å‹ç¼©ç‡.
ä¾‹å¦‚ä½¿ç”¨2æ¬¡æ›²çº¿, å¯ä»¥å¾—åˆ°å¦‚ä¸‹ä¸€ä»½é…ç½®:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>y = 1005.6 - 1.6x + xÂ²
num[0] = y(0) + 1 = 1006
num[1] = y(1) + 0 = 1005
num[2] = y(2) + 1 = 1007
num[3] = y(3) + 1 = 1010
                                                           .
                                                          .
                                                        ..
                                                      ..
                                                     .
                                                   ..
                                                (3, 1010)
                                              ...
.                                           ..
 ..                                      ...
   ....                             (2, 1007)
       .... (0, 1006)            ....
           .............(1, 1005)
</code></pre></div></div>

<p>è¿™é‡Œæ¯ä¸ªdeltaåªéœ€è¦1ä¸ªbitå°±å¤Ÿäº†.</p>

<p>æŒ‰ç…§è¿™ç§æ€è·¯, <strong>åœ¨ç»™å®šæ•°ç»„ä¸­æ‰¾åˆ°ä¸€æ¡æ›²çº¿æ¥æè¿°ç‚¹çš„è¶‹åŠ¿,</strong>
<strong>å†ç”¨ä¸€ä¸ªæ¯”è¾ƒå°çš„deltaæ•°ç»„ä¿®æ­£æ›²çº¿åˆ°å®é™…ç‚¹çš„è·ç¦», å¾—åˆ°åŸå§‹å€¼, å°±å¯ä»¥å®ç°å¤§å¹…åº¦çš„æ•°æ®å‹ç¼©. è€Œä¸”æ‰€æœ‰çš„æ•°æ®éƒ½æ— éœ€è§£å‹å…¨éƒ¨æ•°æ®å°±ç›´æ¥è¯»å–ä»»æ„ä¸€ä¸ª.</strong></p>

<h1 id="æ‰¾åˆ°è¶‹åŠ¿å‡½æ•°">æ‰¾åˆ°è¶‹åŠ¿å‡½æ•°</h1>

<p>å¯»æ‰¾è¿™æ ·ä¸€æ¡æ›²çº¿å°±ä½¿ç”¨çº¿æ€§å›å½’,
ä¾‹å¦‚åœ¨ [slimarray] ä¸­ä½¿ç”¨2æ¬¡æ›²çº¿ <code class="highlighter-rouge">f(x) = Î²â‚ + Î²â‚‚x + Î²â‚ƒxÂ²</code>, æ‰€è¦åšçš„å°±æ˜¯ç¡®å®šæ¯ä¸ªÎ²áµ¢çš„å€¼,
ä»¥ä½¿å¾—<code class="highlighter-rouge">f(xâ±¼) - yâ±¼</code>çš„å‡æ–¹å·®æœ€å°. xâ±¼æ˜¯æ•°ç»„ä¸‹æ ‡0, 1, 2â€¦; yâ±¼æ˜¯æ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ çš„å€¼.</p>

<img src="/publish/wechat/algo/slimarray/images/CDATA_X_=_begin_bmatrix_1_x_1_x_1_2_1_x_2_x_2_2_vdots_vdots_vdo-3091635a353d00f0a079b17e0fe3bc68.png" style="display: block; margin: 0 auto 1.3em auto" _alt="% <![CDATA[
X = \begin{bmatrix}
1      & x_1    & x_1^2 \\
1      & x_2    & x_2^2 \\
\vdots & \vdots & \vdots    \\
1      & x_n    & x_n^2
\end{bmatrix}
,

\vec{\beta} =
\begin{bmatrix}
\beta_1 \\
\beta_2 \\
\beta_3 \\
\end{bmatrix}
,

Y =
\begin{bmatrix}
y_1 \\
y_2 \\
\vdots \\
y_n
\end{bmatrix} %]]>"/>

<p>ç°åœ¨è¦æ‰¾åˆ°ä¸€ç»„Î², ä½¿å¾—å‡æ–¹å·®æœ€å°:</p>

<img src="/publish/wechat/algo/slimarray/images/X_vec_beta_-Y_2_-a99a66a6238f28d0d7dfd5bcc5e7eeba.png" style="display: block; margin: 0 auto 1.3em auto" _alt="||X{\vec {\beta }}-Y||^{2}"/>

<p>åœ¨ä¸Šé¢è¿™ä¸ªå‡½æ•°é‡Œ, æŠŠ Î² çœ‹åšå˜é‡, è¦æ‰¾æå€¼çš„è¯å°±çœ‹è¿™ä¸ªå‡½æ•°å¯¹ Î² çš„å¯¼æ•°ä½•æ—¶ä¸º0:</p>

<img src="/publish/wechat/algo/slimarray/images/CDATA_begin_aligned_frac_partial_X_vec_beta_-Y_2_partial_vec_be-017aa94088f7f1c72403528afdc80566.png" style="display: block; margin: 0 auto 1.3em auto" _alt="% <![CDATA[
\begin{aligned}
& \frac
{\partial||X{\vec {\beta }}-Y||^{2}}
{\partial\vec \beta }
\\
= & \frac{\partial ((X \vec \beta -Y)^{T}(X{\vec {\beta }}-Y))}
         {\partial \vec \beta}
\\
= & \frac{\partial (Y^{T}Y-Y^{T}X{\vec {\beta }}-{\vec {\beta }}^{T}X^{T}Y+{\vec {\beta }}^{T}X^{T}X{\vec {\beta }})}
{\partial \vec \beta}
\\
= & -2X^{T}Y+2X^{T}X{\vec {\beta }}
\end{aligned} %]]>"/>

<p>äºæ˜¯å¾—åˆ° Î² è·Ÿç‚¹é›†çš„å…³ç³»ä¸º:</p>

<img src="/publish/wechat/algo/slimarray/images/vec_hat_beta_=_X_T_X_-1_X_T_Y-e14ebc0b21e9651c18206da3f85d30e4.png" style="display: block; margin: 0 auto 1.3em auto" _alt="{\vec {\hat {\beta }}}=(X^{T}X)^{-1}X^{T}Y"/>

<p><strong>æ„å»ºslimarray, ä¹Ÿå°±æ˜¯å‹ç¼©æ•°æ®çš„è¿‡ç¨‹, å°±æ˜¯æŠŠæ•°ç»„ä¸‹æ ‡ä½œä¸ºå‘é‡X, æ•°ç»„å…ƒç´ çš„å€¼ä½œä¸ºå‘é‡Y,å¸¦å…¥åˆ°ä¸Šé¢çš„å¼å­å–å¾—Î²,</strong>
<strong>å†é€ç‚¹è®¡ç®—æ›²çº¿åˆ°ç‚¹çš„è·ç¦», ç”Ÿæˆdeltaæ•°ç»„.</strong></p>

<h1 id="å¯»æ‰¾æœ€ä½³åˆ†æ®µæ‹Ÿåˆç­–ç•¥">å¯»æ‰¾æœ€ä½³åˆ†æ®µæ‹Ÿåˆç­–ç•¥</h1>

<ul>
  <li>
    <p>ä½†æ˜¯æˆ‘ä»¬çœ‹åˆ°æ›²çº¿çš„å­˜å‚¨ä¹Ÿæœ‰å¼€é”€, ä¾‹å¦‚<code class="highlighter-rouge">y = 1005.6 - 1.6x + xÂ²</code> è¿™æ ·ä¸€ä¸ªäºŒæ¬¡æ›²çº¿,
  éœ€è¦3ä¸ªæµ®ç‚¹æ•°(3ä¸ª64bit)æ¥å­˜å‚¨, é«˜æ¬¡æ›²çº¿å¯ä»¥è·å¾—æ›´å°çš„deltaæ•°ç»„, ä½†æœ¬èº«çš„å­˜å‚¨å¼€é”€å˜å¤§. åŒæ—¶æ›´é«˜æ¬¡çš„æ›²çº¿, åœ¨è¿˜åŸåŸå§‹æ•°ç»„æ—¶çš„è®¡ç®—é‡ä¹Ÿæ›´é«˜(è®¡ç®—å¼€é”€è·Ÿæ›²çº¿æ¬¡æ•°æ˜¯O(nÂ²)çš„å…³ç³»). åœ¨ç»è¿‡ä¸€äº›æµ‹è¯•å, <strong>slimarrayçš„å®ç°ä¸­é€‰æ‹©äº†äºŒæ¬¡æ›²çº¿, å®ƒåœ¨å­˜å‚¨ç©ºé—´å’Œè®¡ç®—æ€§èƒ½æ–¹é¢çš„å¹³è¡¡æœ€å¥½</strong>.</p>
  </li>
  <li>
    <p>åŒæ—¶, ä¸€æ¡æ›²çº¿ä¹Ÿå¯èƒ½æ— æ³•æè¿°æ•´ä¸ªæ•°ç»„çš„è¶‹åŠ¿, å®ç°æ—¶éœ€è¦æŠŠæ•°ç»„åˆ†æˆå¤šæ®µ, é€æ®µæ‹Ÿåˆ, å‹ç¼©.åœ¨æˆ‘ä»¬çš„å®ç°ä¸­, å°†æ•°ç»„æ‹†åˆ†æˆ <strong>æ¯16ä¸ªæ•°å­—ä¸€ç»„</strong>, å¯¹æ¯16ä¸ªæ•°å­—æ‹Ÿåˆä¸€æ¡æ›²çº¿å’Œå¯¹åº”çš„deltaæ•°ç»„.</p>

    <p>ç„¶åå†å°è¯•å°†ç›¸é‚»çš„2ç»„åˆå¹¶, ç”¨ä¸€æ¡æ›²çº¿å»æ‹Ÿåˆ, çœ‹æœ€ç»ˆå¾—åˆ°çš„ç©ºé—´æ•ˆç‡æ˜¯å¦æ›´ä½,
  ä¹Ÿå°±æ˜¯å¯¹æ¯”3ä¸ªç³»æ•°+32ä¸ªdeltaâ‚ çš„å¼€é”€ è·Ÿ 6ä¸ªç³»æ•°+32ä¸ªdeltaâ‚‚ çš„å¼€é”€.
  å¦‚æœç›¸é‚»2ç»„æ•°å­—çš„è¶‹åŠ¿å·®ä¸å¤š, é‚£ä¹ˆåˆå¹¶ä¹‹å, å¯ä»¥çœæ‰3ä¸ªç³»æ•°çš„å­˜å‚¨ç©ºé—´,
  è€Œä¸”å¾ˆå¯èƒ½deltaæ‰€éœ€çš„bitå®½åº¦ä¸ä¼šå› ä¸ºæ‹Ÿåˆä¹‹åå˜å¤§, é‚£ä¹ˆå°±è¿›ä¸€æ­¥èŠ‚çœäº†ç©ºé—´.</p>

    <p>é‡å¤è¿™ä¸ªæ­¥éª¤å¯»æ‰¾å¯ä»¥åˆå¹¶çš„ç›¸é‚»çš„ç»„, æœ€ç»ˆå¾—åˆ°è¿™ä¸ªç®—æ³•ä¸‹æœ€ä¼˜çš„é…ç½®.</p>
  </li>
</ul>

<h1 id="å®ç°">å®ç°</h1>

<h2 id="æè¿°åˆ†åŒºçš„æ•°æ®ç»“æ„-span">æè¿°åˆ†åŒºçš„æ•°æ®ç»“æ„: span</h2>

<p>æœ€åæˆ‘ä»¬å°†æ•´ä¸ªæ•°ç»„åˆ’åˆ†ä¸ºè‹¥å¹²ä¸ª<code class="highlighter-rouge">16*k</code> å¤§å°çš„åˆ†åŒº(span)å, æ¥ä¸‹æ¥éœ€è¦å°†æ¯ä¸ª span çš„ä¿¡æ¯å­˜å‚¨èµ·æ¥.</p>

<p>æˆ‘ä»¬ç”¨ä¸€ä¸ª bitmap æ¥è¡¨ç¤º span å¯¹åº”åŸå§‹æ•°ç»„çš„åŒºé—´:
bitmap ä¸­çš„ä¸€ä¸ª bit ä»£è¡¨ 16 ä¸ªæ•°ç»„å…ƒç´ , ç½®ä½çš„ä½ç½®è¡¨ç¤ºä¸€ä¸ª span çš„æœ€åä¸€ä¸ª16ä¸ªæ•°å­—çš„ä½ç½®, ä¾‹å¦‚:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>001011110000......
&lt;-- least significant bit
</code></pre></div></div>

<p>åœ¨ä¸Šé¢è¿™ä¸ª bitmap ä¸­çš„å‰3ä¸ª span å¯¹åº”çš„åŒºé—´åˆ†åˆ«æ˜¯:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>span[0] å¯¹åº”nums[0: 48]
span[1] å¯¹åº”nums[48: 80]
span[2] å¯¹åº”nums[80: 96]
</code></pre></div></div>

<p>å½“éœ€è¦ä»æ•°ç»„ä¸‹æ ‡<code class="highlighter-rouge">i</code>æ‰¾åˆ°å¯¹åº”çš„ span æ—¶, å°±ç»Ÿè®¡ä¸€ä¸‹ bitmap ä¸­ç¬¬ <code class="highlighter-rouge">i/16</code> ä¸ª bit ä¹‹å‰1çš„ä¸ªæ•°:</p>

<p>è¿™ä¸ªæ“ä½œéå¸¸å¿«, åœ¨goä»£ç ä¸­å¯¹åº”çš„æ˜¯<code class="highlighter-rouge">math/bit.OnesCount()</code>å‡½æ•°(å…¶ä»–è¯­è¨€ä¸­ä¹Ÿå«åšpopulation count), ä¸€èˆ¬åªéœ€è¦ä¸€ä¸ªæ±‡ç¼–æŒ‡ä»¤:</p>

<p><code class="highlighter-rouge">spanIndex = OnesCount(bitmap &amp; (1&lt;&lt;(i/16) - 1))</code></p>

<h2 id="è¯»å–è¿‡ç¨‹">è¯»å–è¿‡ç¨‹</h2>

<p>è¯»å–è¿‡ç¨‹é€šè¿‡æ‰¾span, è¯»å–spané…ç½®,è¿˜åŸåŸå§‹æ•°æ®å‡ ä¸ªæ­¥éª¤å®Œæˆ, å‡è®¾ slimarray çš„å¯¹è±¡æ˜¯<code class="highlighter-rouge">sa</code>:</p>

<ul>
  <li>é€šè¿‡ä¸‹æ ‡<code class="highlighter-rouge">i</code> å¾—åˆ° spanIndex: <code class="highlighter-rouge">spanIndex = OnesCount(sa.bitmap &amp; (1&lt;&lt;(i/16) - 1))</code>;</li>
  <li>é€šè¿‡ spanIndex å¾—åˆ°å¤šé¡¹å¼çš„3ä¸ªç³»æ•°: <code class="highlighter-rouge">[bâ‚€, bâ‚, bâ‚‚] = sa.polynomials[spanIndex: spanIndex + 3]</code>;</li>
  <li>è¯»å– delta æ•°ç»„èµ·å§‹ä½ç½®, å’Œ delta æ•°ç»„ä¸­æ¯ä¸ª delta çš„ bit å®½åº¦: <code class="highlighter-rouge">config=sa.configs[spanIndex]</code>;</li>
  <li>delta çš„å€¼ä¿å­˜åœ¨ delta æ•°ç»„çš„<code class="highlighter-rouge">config.offset + i*config.width</code>çš„ä½ç½®, ä»è¿™ä¸ªä½ç½®è¯»å–<code class="highlighter-rouge">width</code>ä¸ª bit å¾—åˆ° delta çš„å€¼.</li>
  <li>è®¡ç®— <code class="highlighter-rouge">nums[i]</code> çš„å€¼: <code class="highlighter-rouge">bâ‚€ + bâ‚*i + bâ‚‚*iÂ²</code> å†åŠ ä¸Š delta çš„å€¼.</li>
</ul>

<p>ç®€åŒ–çš„è¯»å–é€»è¾‘å¦‚ä¸‹:</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">func</span> <span class="p">(</span><span class="n">sm</span> <span class="o">*</span><span class="n">SlimArray</span><span class="p">)</span> <span class="n">Get</span><span class="p">(</span><span class="n">i</span> <span class="kt">int32</span><span class="p">)</span> <span class="kt">uint32</span> <span class="p">{</span>

    <span class="n">x</span> <span class="o">:=</span> <span class="kt">float64</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>

    <span class="n">bm</span> <span class="o">:=</span> <span class="n">sm</span><span class="o">.</span><span class="n">spansBitmap</span> <span class="o">&amp;</span> <span class="n">bitmap</span><span class="o">.</span><span class="n">Mask</span><span class="p">[</span><span class="n">i</span><span class="o">&gt;&gt;</span><span class="m">4</span><span class="p">]</span>
    <span class="n">spanIdx</span> <span class="o">:=</span> <span class="n">bits</span><span class="o">.</span><span class="n">OnesCount64</span><span class="p">(</span><span class="n">bm</span><span class="p">)</span>

    <span class="n">j</span> <span class="o">:=</span> <span class="n">spanIdx</span> <span class="o">*</span> <span class="n">polyCoefCnt</span>
    <span class="n">p</span> <span class="o">:=</span> <span class="n">sm</span><span class="o">.</span><span class="n">Polynomials</span>
    <span class="n">v</span> <span class="o">:=</span> <span class="kt">int64</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">+</span> <span class="n">p</span><span class="p">[</span><span class="n">j</span><span class="o">+</span><span class="m">1</span><span class="p">]</span><span class="o">*</span><span class="n">x</span> <span class="o">+</span> <span class="n">p</span><span class="p">[</span><span class="n">j</span><span class="o">+</span><span class="m">2</span><span class="p">]</span><span class="o">*</span><span class="n">x</span><span class="o">*</span><span class="n">x</span><span class="p">)</span>

    <span class="n">config</span> <span class="o">:=</span> <span class="n">sm</span><span class="o">.</span><span class="n">Configs</span><span class="p">[</span><span class="n">spanIdx</span><span class="p">]</span>
    <span class="n">deltaWidth</span> <span class="o">:=</span> <span class="n">config</span> <span class="o">&amp;</span> <span class="m">0xff</span>
    <span class="n">offset</span> <span class="o">:=</span> <span class="n">config</span> <span class="o">&gt;&gt;</span> <span class="m">8</span>

    <span class="n">bitIdx</span> <span class="o">:=</span> <span class="n">offset</span> <span class="o">+</span> <span class="kt">int64</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">*</span><span class="n">deltaWidth</span>

    <span class="n">d</span> <span class="o">:=</span> <span class="n">sm</span><span class="o">.</span><span class="n">Deltas</span><span class="p">[</span><span class="n">bitIdx</span><span class="o">&gt;&gt;</span><span class="m">6</span><span class="p">]</span>
    <span class="n">d</span> <span class="o">=</span> <span class="n">d</span> <span class="o">&gt;&gt;</span> <span class="kt">uint</span><span class="p">(</span><span class="n">bitIdx</span><span class="o">&amp;</span><span class="m">63</span><span class="p">)</span>

    <span class="k">return</span> <span class="kt">uint32</span><span class="p">(</span><span class="n">v</span> <span class="o">+</span> <span class="kt">int64</span><span class="p">(</span><span class="n">d</span><span class="o">&amp;</span><span class="n">bitmap</span><span class="o">.</span><span class="n">Mask</span><span class="p">[</span><span class="n">deltaWidth</span><span class="p">]))</span>
<span class="p">}</span>
</code></pre></div></div>

<blockquote>
  <p>å®é™…å®ç°ä¸­, è¿˜å°†æ•´ä¸ªæ•°ç»„åˆ’åˆ†æˆå¤šä¸ª1024å…ƒç´ å¤§å°çš„æ®µ, ä»¥å‡å°‘xå˜å¤§æ—¶äº§ç”Ÿçš„è¯¯å·®.</p>
</blockquote>

<p>åœ¨ç”¨æ›²çº¿æ‹Ÿåˆçš„æ–¹å¼ä¸­è¿˜æœ‰ä¸€äº›é¢å¤–çš„å¥½å¤„, ä¾‹å¦‚æŸäº›å¯¹æ•´ä¸ªæ•°ç»„çš„ç»Ÿè®¡æ“ä½œå¯ä»¥é€šè¿‡æ›²çº¿çš„è®¡ç®—æ¥ç®€åŒ–:</p>

<h2 id="æ±‚å’Œçš„ä¼˜åŒ–è®¾è®¡">æ±‚å’Œçš„ä¼˜åŒ–è®¾è®¡</h2>

<p>å¯¹ slimarray ä¸­ä¸€æ®µæ•°æ®çš„æ±‚å’Œè¿ç®—ä¼šå˜å¾—éå¸¸é«˜æ•ˆ,
å¯¹nä¸ªæ•°å­—yáµ¢çš„æ±‚å’Œå¯ä»¥è½¬åŒ–ä¸ºç®€å•çš„æ•°å€¼è®¡ç®—:</p>

<img src="/publish/wechat/algo/slimarray/images/CDATA_begin_aligned_sum_y_i_=_sum_beta_0_sum__1_i_sum_beta_2_i_-e86d7f9837c9200c36640b109d9cb862.png" style="display: block; margin: 0 auto 1.3em auto" _alt="% <![CDATA[
\begin{aligned}
\sum y_i = & \sum\beta_0 + \sumÎ²_1 i + \sum \beta_2 i^2 + \sum d_i \\
         = & \beta_0 n \\
      & + \beta_1 \frac{1}{2} n (n+1) \\
      & + \beta_2 \frac{1}{6} n (n+1) (2n+1) \\
      & + \sum d_i
\end{aligned} %]]>"/>

<ul>
  <li>
    <p>å¦‚æœåªéœ€è¦è¿‘ä¼¼ç»“æœ(å¿½ç•¥Î£dáµ¢), é‚£ä¹ˆä¸€ä¸ª O(n) çš„éå†ç´¯åŠ å°±ç›´æ¥è¢«è½¬æ¢æˆO(1)çš„è®¡ç®—.</p>
  </li>
  <li>
    <p>å¦‚æœè¦ç²¾ç¡®å€¼, å› ä¸ºdáµ¢çš„å®½åº¦æ¯”è¾ƒå°, åœ¨å®ç°æ—¶å°† 4 bit æˆ– 8 bit æ‰“åŒ…åˆ°ä¸€ä¸ªæˆ–å¤šä¸ªuint64é‡Œ,
è®¡ç®—æ±‚å’Œå¯ä»¥é€šè¿‡ SIMD æŒ‡ä»¤æ¥ä¼˜åŒ–, ä¾‹å¦‚å¯¹128ä¸ª 4 bit æ•°çš„æ±‚å’Œè¿ç®—å°±å¯ä»¥é€šè¿‡: <code class="highlighter-rouge">_mm512_reduce_add_epi64(_mm512_sad_epu8(a, _mm512_setzero_si512()))</code> æ¥å®Œæˆ.</p>
  </li>
</ul>

<p>å¦‚æœæœ‰å¿…è¦, ä¹Ÿå¯ä»¥ä¹Ÿå­˜å‚¨ä¸€ä¸ªspançš„Î£dáµ¢çš„å€¼, è¿™æ ·æ¯ä¸ª span éœ€è¦é¢å¤–çš„ 64bit, æ¢æ¥çš„æ˜¯å¯¹ span èŒƒå›´å†…çš„æ±‚å’Œæ“ä½œä¼˜åŒ–åˆ° O(1) çš„å¤æ‚åº¦.</p>

<p>[<svg height="24" class="octicon octicon-mark-github" viewBox="0 0 16 16" version="1.1" width="24" aria-hidden="true"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path></svg> slimarray]</p>


        <p style="font-size: 0.7rem; font-weight: bolder;">
æœ¬æ–‡é“¾æ¥: [https://blog.openacid.com/algo/slimarray/]


</p>
<ul class="page-links" style="display:block;">




    
        <li style="font-size:0.7em">
        [slim]: https://github.com/openacid/slim
        </li>
    

    
        <li style="font-size:0.7em">
        [slimarray]: https://github.com/openacid/slimarray
        </li>
    

</ul>
<p>
<img src="/assets/images/qrcode-hori.jpg" alt="openacid">
</p>

        
      </section>

      <footer class="page__meta">
        
        
  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> æ ‡ç­¾: </strong>
    <span itemprop="keywords">
    
      
      
      [array]<span class="sep">, </span>
    
      
      
      [compress]<span class="sep">, </span>
    
      
      
      [succinct]<span class="sep">, </span>
    
      
      
      [æ•°ç»„]
    
    </span>
  </p>




  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> åˆ†ç±»: </strong>
    <span itemprop="keywords">
    
      
      
      [algo]
    
    </span>
  </p>


        
  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> æ›´æ–°æ—¶é—´:</strong> <time datetime="2020-11-15T00:00:00+08:00">November 15, 2020</time></p>


      </footer>

      <section class="page__share">
  
    <h4 class="page__share-title">åˆ†äº«</h4>
  

  [<i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span>]

  [<i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span>]

  [<i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span>]
</section>


      
  <nav class="pagination">
    
      [ä¸Šä¸€é¡µ]
    
    
      [ä¸‹ä¸€é¡µ]
    
  </nav>

    </div>

    
      <div class="page__comments">
  
  
      <h4 class="page__comments-title">ç•™ä¸‹è¯„è®º</h4>
      <section id="disqus_thread"></section>
    
</div>

    
  </article>

  
  
    <div class="page__related">
      <h4 class="page__related-title">çŒœæ‚¨è¿˜å–œæ¬¢</h4>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        [200è¡Œä»£ç å®ç°åŸºäºpaxosçš„kvå­˜å‚¨
]
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          30 åˆ†é’Ÿé˜…è¯»
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">ç”¨200è¡Œä»£ç å®ç°ä¸€ä¸ªåŸºäºpaxosçš„kvå­˜å‚¨, ä»¥æœ€ç®€æ´çš„å½¢å¼å±•ç¤ºpaxoså¦‚ä½•è¿è¡Œ, ä½œä¸º paxosçš„ç›´è§‚è§£é‡Š è¿™ç¯‡æ•™ç¨‹ä¸­çš„ä»£ç ç¤ºä¾‹éƒ¨åˆ†
</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        [ååˆ†å¸ƒå¼æ—¶ä»£: å¤šæ•°æ´¾è¯»å†™çš„â€™å°‘æ•°æ´¾â€™å®ç°
]
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          19 åˆ†é’Ÿé˜…è¯»
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">é€šè¿‡å‡å°‘å¤šæ•°æ´¾è¯»å†™ä¸­å‚ä¸è€…çš„æ•°é‡, å¯ä»¥å®ç°åˆ†å¸ƒå¼ç³»ç»ŸæŸäº›ç‰¹å®šåœºæ™¯çš„ä¼˜åŒ–, ä»¥åŠä»‹ç»è¿™äº›ä¼˜åŒ–å¯¹ç³»ç»Ÿå¯ç”¨æ€§äº§ç”Ÿçš„å½±å“, æ ¹æ®ä»€ä¹ˆæ ‡å‡†æ¥é€‰æ‹©å’Œè°ƒæ•´è¿™äº›å‚æ•°.
</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        [å¯é åˆ†å¸ƒå¼ç³»ç»Ÿ-paxosçš„ç›´è§‚è§£é‡Š
]
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          12 åˆ†é’Ÿé˜…è¯»
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">æ²¡æœ‰paxosçš„ä¸€å †æœºå™¨, åªèƒ½å«åšåˆ†å¸ƒå¼; æœ‰paxosååŒæ‰å«åˆ†å¸ƒå¼ç³»ç»Ÿ. å’±å¾—æŠŠpaxosèŠå¼€äº†èŠé€äº†
</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        [å‡ ä¸ªæ— ç†å–é—¹çš„codingå¿ƒå¾—
]
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          1 åˆ†é’Ÿé˜…è¯»
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">æ¥è‡ªä¸€ä¸ªè«å¾—æ„Ÿæƒ…çš„codingä¸‡å¹´æˆ·
</p>
  </article>
</div>

        
      </div>
    </div>
  
  
</div>

    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';">
    <label class="sr-only" for="search">
      è¾“å…¥æ‚¨è¦æœç´¢çš„å…³é”®è¯...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="è¾“å…¥æ‚¨è¦æœç´¢çš„å…³é”®è¯..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->



<script language="javascript" type="text/x-mathjax-config">
    MathJax.Hub.Config({
      jax: ["input/TeX", "output/SVG"],
      tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"] ],
          displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
          processEscapes: true
        }
    });
</script>
<script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_SVG"> </script>




<!-- end custom footer snippets -->

        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>å…³æ³¨:</strong></li>
    

    
      
        
      
        
      
        
      
        
      
        
      
        
      
    

    <li>[<i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed]</li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2020 OpenACID-åˆ†å¸ƒå¼ç ”ç©¶å°é™¢. æŠ€æœ¯æ¥è‡ªäº [Jekyll] &amp; [Minimal Mistakes].</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>




  <script>
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-69976993-2']);
  
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>






    
  <script>
    var disqus_config = function () {
      this.page.url = "https://blog.openacid.com/algo/slimarray/";  /* Replace PAGE_URL with your page's canonical URL variable */
      this.page.identifier = "/algo/slimarray"; /* Replace PAGE_IDENTIFIER with your page's unique identifier variable */
    };
    (function() { /* DON'T EDIT BELOW THIS LINE */
      var d = document, s = d.createElement('script');
      s.src = 'https://openacid.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
<noscript>Please enable JavaScript to view the [comments powered by Disqus.]</noscript>


  





  <style> .header-link { display: none !important; } </style> </body >
</html>
